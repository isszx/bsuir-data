<html>
<head>
</head>
<BODY background="../fon.gif">
<p><div align="center"><b>Глава 8. Формы</b></div></p><font size="-1">

<b>Для чего нужны формы? </b>

<P align="justify"><B>Форма</B> — это инструмент, с помощью которого HTML-документ может послать
некоторую информацию в некоторую заранее определенную точку внешнего мира,
где информация будет некоторым образом обработана. </P>

<P align="justify">Рассказать о формах в книге, посвященной HTML, достаточно трудно. Причина
очень простая: создать форму гораздо проще, чем ту &quot;точку внешнего
мира&quot;, в которую форма будет посылать информацию. В качестве такой
&quot;точки&quot; в большинстве случаев выступает программа, написанная
на Перл или Си. Программы, обрабатывающие данные, переданные формами, часто
называют CGI-скриптами. Сокращение CGI (Common Gateways Interface) означает
&quot;общепринятый интерфейс шлюзов&quot;. Написание CGI-скриптов в большинстве
случаев требует хорошего знания соответствующего языка программирования
и возможностей операционной системы Unix. </P>

<P align="justify">В последнее время определенное распространение получил язык PHP/FI,
инструкции которого можно встраивать прямо в HTML-документы (документы
при этом сохраняются в виде файлов с расширением <TT>*.pht</TT> или 
<TT>*.php</TT>). </P>

<P align="justify">Формы передают информацию программам-обработчикам в виде пар 
<TT>[имя переменной]=[значение переменной]</TT>. Имена переменных следует 
задавать латинскими буквами. Значения переменных воспринимаются обработчиками 
как строки, даже если они содержат только цифры. </P>

<b>Как устроена форма </b>

<P align="justify">Форма открывается меткой <TT>&lt;FORM&gt;</TT> и заканчивается меткой 
<TT>&lt;/FORM&gt;</TT>. HTML-документ может содержать в себе несколько форм, 
однако формы не должны находиться одна внутри другой. HTML-текст, включая 
метки, может размещаться внутри форм без ограничений.</P>

<P align="justify">Метка <TT>&lt;FORM&gt;</TT> может содержать три атрибута, один из которых 
является обязательным. Вот эти атрибуты:</P>

<DL>
<DT><TT>ACTION</TT> 
<DD>Обязательный атрибут. Определяет, где находится обработчик формы.
<DT><TT>METHOD</TT> 
<DD>Определяет, каким образом (иначе говоря, с помощью какого метода
протокола передачи гипертекстов) данные из формы будут переданы обработчику.
Допустимые значения: <TT>METHOD=POST</TT> и <TT>METHOD=GET</TT>. Если значение 
атрибута не установлено, по умолчанию предполагается <TT>METHOD=GET</TT>.
<DT><TT>ENCTYPE</TT> 
<DD>Определяет, каким образом данные из формы будут закодированы
для передачи обработчику. Если значение атрибута не установлено, по умолчанию
предполагается <TT>ENCTYPE=application/x-www-form-urlencoded</TT>. 
</DL>

<b>Простейшая форма </b>

<P align="justify">Для того, чтобы запустить процесс передачи данных из формы обработчику,
нужен какой-то орган управления. Создать такой орган управления очень просто:</P>

<PRE>&lt;INPUT TYPE=submit&gt;</PRE>

<P align="justify">Встретив такую строчку внутри формы, браузер нарисует на экране кнопку
с надписью <TT>Submit</TT> (читается &quot;сабмит&quot; с ударением на втором слоге,
от английского &quot;подавать&quot;), при нажатии на которую все имеющиеся
в форме данные будут переданы обработчику, определенному в метке 
<TT>&lt;FORM&gt;</TT>.</P>

<P align="justify">Надпись на кнопке можно задать такую, какая нравится, путем введения
атрибута <TT>VALUE=&quot;[Надпись]&quot;</TT> (читается &quot;вэлью&quot; 
с ударением на первом слоге, от английского &quot;значение&quot;), 
например:</P>

<PRE>&lt;INPUT TYPE=submit VALUE=&quot;Поехали!&quot;&gt;</PRE>

<P align="justify">Теперь мы знаем достаточно для того, чтобы написать простейшую форму
(<A HREF="e0011.html">пример 11</A>). Она не будет собирать никаких данных, 
а просто вернет нас к тексту этой главы. </P>

<PRE>
&lt;HTML&gt; 
&lt;HEAD&gt; 
&lt;TITLE&gt;Пример 11&lt;/TITLE&gt; 
&lt;/HEAD&gt;
&lt;H1&gt;Простейшая форма &lt;/H1&gt; 
&lt;FORM ACTION=&quot;pr0008.html&quot;&gt; &lt;!--Это начало формы--&gt; 
&lt;INPUT TYPE=submit VALUE=&quot;Назад, к главе 8...&quot;&gt; 
&lt;/FORM&gt; &lt;!--Это конец формы--&gt; 
&lt;/BODY&gt;
&lt;/HTML&gt;
</PRE>

<P align="justify">Надпись, нанесенную на кнопку, можно при необходимости передать обработчику
путем введения в определение кнопки атрибута <TT>NAME=[имя]</TT> (читается 
&quot;нэйм&quot;, от английского &quot;имя&quot;), например:</P>

<PRE>&lt;INPUT TYPE=submit NAME=button VALUE=&quot;Поехали!&quot;&gt;</PRE>

<P align="justify">При нажатии на такую кнопку обработчик вместе со всеми остальными данными
получит и переменную <TT>button</TT> со значением <TT>Поехали!</TT>.</P>

<P align="justify">В форме может быть несколько кнопок типа <TT>submit</TT> с различными 
именами и/или значениями. Обработчик, таким образом, может действовать 
по-разному в зависимости от того, какую именно кнопку <TT>submit</TT> нажал 
пользователь. </P>

<b>Как форма собирает данные </b>

<P align="justify">Существуют и другие типы элементов <TT>&lt;INPUT&gt;</TT>. Каждый элемент 
<TT>&lt;INPUT&gt;</TT> должен включать атрибут <TT>NAME=[имя]</TT>, определяющий 
имя элемента (и, соответственно, имя переменной, которая будет передана 
обработчику). Имя должно задаваться <B>только латинскими буквами</B>. 
Большинство элементов <TT>&lt;INPUT&gt;</TT> должны включать атрибут 
<TT>VALUE=&quot;[значение]&quot;</TT>, определяющий значение, которое будет
передано обработчику под этим именем. Для элементов <TT>&lt;INPUT TYPE=text&gt;</TT>
и <TT>&lt;INPUT TYPE=password&gt;</TT>, однако, этот атрибут не обязателен, поскольку
значение соответствующей переменной может вводиться пользователем с клавиатуры.</P>

<P align="justify">Основные типы элементов <TT>&lt;INPUT&gt;</TT>:</P>

<DL>
<DT><TT>TYPE=text</TT> 
<DD>Определяет окно для ввода строки текста. Может содержать дополнительные
атрибуты <TT>SIZE=[число]</TT> (ширина окна ввода в символах) и 
<TT>MAXLENGTH=[число]</TT> (максимально допустимая длина вводимой строки 
в символах). Пример:

<DT><TT>&lt;INPUT TYPE=text SIZE=20 NAME=user VALUE=&quot;Иван&quot;&gt;</TT> 
<DD>Определяет окно шириной 20 символов для ввода текста. По умолчанию 
в окне находится текст <TT>Иван</TT>, который пользователь может редактировать. 
Отредактированный (или неотредактированный) текст передается обработчику 
в переменной <TT>user</TT>.

<DT><TT>TYPE=password</TT> 
<DD>Определяет окно для ввода пароля. Абсолютно аналогичен
типу <TT>text</TT>, только вместо символов вводимого текста показывает 
на экране звездочки (*). Пример:

<DT><TT>&lt;INPUT TYPE=password NAME=pw SIZE=20 MAXLENGTH=10&gt;</TT> 
<DD>Определяет окно шириной 20 символов для ввода пароля. Максимально 
допустимая длина пароля — 10 символов. Введенный пароль передается 
обработчику в переменной <TT>pw</TT>.

<DT><TT>TYPE=radio</TT> 
<DD>Определяет радиокнопку. Может содержать дополнительный атрибут
<TT>checked</TT> (показывает, что кнопка помечена). В группе радиокнопок 
с одинаковыми именами может быть только одна помеченная радиокнопка. Пример:

<DT><TT>
&lt;INPUT TYPE=radio NAME=modem VALUE=&quot;9600&quot; checked&gt; 9600 бит/с<BR>
&lt;INPUT TYPE=radio NAME=modem VALUE=&quot;14400&quot;&gt; 14400 бит/с<BR>
&lt;INPUT TYPE=radio NAME=modem VALUE=&quot;28800&quot;&gt; 28800 бит/с
</TT>
<DD>Определяет группу из трех радиокнопок, подписанных <TT>9600 бит/с</TT>, 
<TT>14400 бит/с</TT> и <TT>28800 бит/с</TT>. Первоначально помечена первая из 
кнопок. Если пользователь не отметит другую кнопку, обработчику будет 
передана переменная <TT>modem</TT> со значением <TT>9600</TT>. Если пользователь 
отметит другую кнопку, обработчику будет передана переменная <TT>modem</TT> 
со значением <TT>14400</TT> или <TT>28800</TT>.

<DT><TT>TYPE=checkbox</TT> 
<DD>Определяет квадрат, в котором можно сделать пометку. Может
содержать дополнительный атрибут <TT>checked</TT> (показывает, что 
квадрат помечен). В отличие от радиокнопок, в группе квадратов с 
одинаковыми именами может быть несколько помеченных квадратов. 
Пример:

<DT><TT>
&lt;INPUT TYPE=checkbox NAME=comp VALUE=&quot;PC&quot;&gt; Персональные компьютеры<BR>
&lt;INPUT TYPE=checkbox NAME=comp VALUE=&quot;WS&quot; checked&gt; Рабочие станции<BR>
&lt;INPUT TYPE=checkbox NAME=comp VALUE=&quot;LAN&quot;&gt; Серверы локальных сетей<BR>
&lt;INPUT TYPE=checkbox NAME=comp VALUE=&quot;IS&quot; checked&gt; Серверы Интернет
</TT>
<DD>Определяет группу из четырех квадратов. Первоначально помечены второй и
четвертый квадраты. Если пользователь не произведет изменений, обработчику
будут переданы две переменные: <TT>comp=WS</TT> и <TT>comp=IS</TT>.

<DT><TT>TYPE=hidden</TT> 
<DD>Определяет скрытый элемент данных, который не виден пользователю
при заполнении формы и передается обработчику без изменений. Такой элемент
иногда полезно иметь в форме, которая время от времени подвергается переработке,
чтобы обработчик мог знать, с какой версией формы он имеет дело. Другие
возможные варианты использования Вы вполне можете придумать сами. Пример:

<DT><TT>&lt;INPUT TYPE=hidden NAME=version VALUE=&quot;1.1&quot;&gt;</TT> 
<DD>Определяет скрытую переменную <TT>version</TT>, которая передается обработчику 
со значением <TT>1.1</TT>.

<DT><TT>TYPE=reset</TT> 
<DD>Определяет кнопку, при нажатии на которую форма возвращается
в исходное состояние. Поскольку при использовании этой кнопки данные обработчику
не передаются, кнопка типа <TT>reset</TT> может и не иметь атрибута <TT>name</TT>. 
Пример:

<DT><TT>&lt;INPUT TYPE=reset VALUE=&quot;Очистить поля формы&quot;&gt;</TT> 
<DD>Определяет кнопку <TT>Очистить поля формы</TT>, при нажатии на которую форма 
возвращается в исходное состояние.

</DL>

<P align="justify">Помимо элементов <TT>&lt;INPUT&gt;</TT>, формы могут содержать меню 
<TT>&lt;SELECT&gt;</TT> и поля для ввода текста <TT>&lt;TEXTAREA&gt;</TT>.</P>

<P align="justify">Меню <TT>&lt;SELECT&gt;</TT> из <TT>n</TT> элементов выглядит примерно так:</P>

<PRE>
&lt;SELECT NAME=&quot;[имя]&quot;&gt; 
&lt;OPTION VALUE=&quot;[значение 1]&quot;&gt;[текст 1] 
&lt;OPTION VALUE=&quot;[значение 2]&quot;&gt;[текст 2] 
... 
&lt;OPTION VALUE=&quot;[значение n]&quot;&gt;[текст n] 
&lt;/SELECT&gt;</PRE>

<P align="justify">Как Вы видите, меню начинается с метки <TT>&lt;SELECT&gt;</TT> и 
заканчивается меткой <TT>&lt;/SELECT&gt;</TT>. Метка <TT>&lt;SELECT&gt;</TT> 
содержит обязательный атрибут <TT>NAME</TT>, определяющий имя переменной, 
которую генерирует меню. </P>

<P align="justify">Метка <TT>&lt;SELECT&gt;</TT> может также содержать атрибут 
<TT>MULTIPLE</TT>, присутствие которого показывает, что из меню можно 
выбрать несколько элементов. Большинство браузеров показывают меню 
<TT>&lt;SELECT MULTIPLE&gt;</TT> в виде окна, в котором находятся 
элементы меню (высоту окна в строках можно задать атрибутом 
<TT>SIZE=[число]</TT>). Меню <TT>&lt;SELECT&gt;</TT> в большинстве 
случаев показывается в виде выпадающего меню. </P>

<P align="justify">Метка <TT>&lt;OPTION&gt;</TT> определяет элемент меню. 
Обязательный атрибут <TT>VALUE</TT> устанавливает значение, которое 
будет передано обработчику, если выбран этот элемент меню. Метка 
<TT>&lt;OPTION&gt;</TT> может включать атрибут <TT>checked</TT>,
показывающий, что данный элемент отмечен по умолчанию. </P>

<P align="justify">Разберем небольшой пример. </P>

<PRE>
&lt;SELECT NAME=&quot;selection&quot;&gt; 
&lt;OPTION VALUE=&quot;option1&quot; checked&gt;Вариант 1 
&lt;OPTION VALUE=&quot;option2&quot;&gt;Вариант 2
&lt;OPTION VALUE=&quot;option3&quot;&gt;Вариант 3 
&lt;/SELECT&gt;</PRE>

<P align="justify">Такой фрагмент определяет меню из трех элементов: <TT>Вариант 1</TT>, 
<TT>Вариант 2</TT> и <TT>Вариант 3</TT>. По умолчанию выбран элемент 
<TT>Вариант 1</TT>. Обработчику будет передана переменная 
<TT>selection</TT> значение которой может быть <TT>option1</TT> 
(по умолчанию), <TT>option2</TT> или <TT>option3</TT>.</P>

<P align="justify">После всего, что мы уже узнали, элемент <TT>&lt;TEXTAREA&gt;</TT> может 
показаться совсем простым. Например:</P>

<PRE>
&lt;TEXTAREA NAME=address ROWS=5 COLS=50&gt; 
А здесь - Ваш адрес...
&lt;/TEXTAREA&gt;</PRE>

<P align="justify">Все атрибуты обязательны. Атрибут <TT>NAME</TT> определяет имя, под 
которым содержимое окна будет передано обработчику (в примере — 
<TT>address</TT>). Атрибут <TT>ROWS</TT> устанавливает высоту окна в строках 
(в примере — 5). Атрибут <TT>COLS</TT> устанавливает ширину окна в символах 
(в примере — 50). </P>

<P align="justify">Текст, размещенный между метками <TT>&lt;TEXTAREA&gt;</TT> и 
<TT>&lt;/TEXTAREA&gt;</TT>, представляет собой содержимое окна по умолчанию. 
Пользователь может его отредактировать или просто стереть. </P>

<P align="justify">Важно знать, что русские буквы в окне <TT>&lt;TEXTAREA&gt;</TT> при передаче
обработчику могут быть конвертированы в соответствующие им символьные объекты.
</P>

<b>Пример </b>

<P align="justify">Для демонстрации использования форм я написал небольшую программу на
PHP, которая находится по адресу:</P>

<PRE>http://206.31.82.215/hp/nc/fd-win.pht</PRE>

<P align="justify">Исходные данные в эту программу передаст форма, описанная в 
<A HREF="e0012.html">примере 12</A>:</P>

<PRE>
&lt;HTML&gt; 
&lt;HEAD&gt; 
&lt;TITLE&gt;Пример 12&lt;/TITLE&gt; 
&lt;/HEAD&gt;
&lt;H1&gt;Несколько более сложная форма &lt;/H1&gt; 
&lt;FORM ACTION=&quot;http://206.31.82.215/hp/nc/fd-win.pht&quot;
 METHOD=post&gt; 
&lt;H2&gt;Расскажите немного о себе...&lt;/H2&gt; 
&lt;P&gt;Указывать подлинные данные совсем не обязательно. 
Для целей демонстрации вполне подойдут и вымышленные.
 &lt;/P&gt; 
&lt;P&gt;Имя: &lt;INPUT TYPE=text SIZE=40 NAME=fn&gt;&lt;BR&gt;
Фамилия: &lt;INPUT TYPE=text SIZE=40 NAME=ln&gt;&lt;BR&gt; 
Пол: &lt;INPUT TYPE=radio NAME=gender VALUE=&quot;male&quot;
 checked&gt;мужской 
&lt;INPUT TYPE=radio NAME=gender
 VALUE=&quot;female&quot;&gt;женский&lt;BR&gt; 
Возраст: &lt;INPUT TYPE=text SIZE=5 NAME=age&gt; лет&lt;BR&gt; 
&lt;INPUT TYPE=submit VALUE=&quot;Запустить обработчик&quot;&gt;&lt;/P&gt; 
&lt;/FORM&gt; 
&lt;/BODY&gt;
&lt;/HTML&gt;</PRE>

<P align="justify">Заполняйте форму, жмите на кнопку и смотрите, что будет... </P>

<b>Маленькая хитрость, <BR>
или Как отправить форму почтой </b>

<P align="justify">Все это прекрасно, скажут скептики, но на кой ляд нужны формы людям,
которым их нечем обработать? Отчасти это верно, но только отчасти. </P>

<P align="justify">HTML предоставляет в Ваше распоряжение довольно мощный механизм пересылки
содержимого форм по электронной почте. Вот как это выглядит на практике.
</P>

<P align="justify">Допустим, что мы слегка изменили Пример 12. Вместо строки </P>

<PRE>&lt;FORM ACTION=&quot;http://206.31.82.215/hp/nc/fd-win.pht&quot;
 METHOD=post&gt;</PRE>

<P align="justify">мы ввели строку </P>

<PRE>&lt;FORM ACTION=&quot;mailto:user@mail.box&quot;
 ENCTYPE=text/plain&gt;</PRE>

<P align="justify">Обратите внимание, что мы изменили алгоритм кодирования на 
<TT>text/plain</TT>, то есть фактически выключили кодирование вообще. </P>

<P align="justify">Предположим теперь, что пользователь указал, имя <TT>Иван</TT>, 
фамилию <TT>Петров</TT>, мужской пол и возраст 22 года. Теперь вопрос: 
что произойдет, если пользователь нажмет на кнопку 
<TT>Запустить обработчик</TT>?</P>

<P align="justify">Ответ прост. На адрес <TT>user@mail.box</TT> электронной почтой 
автоматически будет отправлено сообщение следующего содержания:</P>

<PRE>
fn=Иван 
ln=Петров 
gender=male 
age=22</PRE>

<P align="justify">К сожалению, не все пользователи смогут воспользоваться такой формой.
Дело в том, что всю работу по составлению сообщения и запуску почтовой
программы для его отправки фактически берет на себя браузер пользователя.
Это значит, что конфигурация доступа пользователя к Интернет должна обеспечивать
одновременное функционирование протокола передачи гипертекстов и протокола
доставки исходящей почты. Такое возможно не всегда. Тем не менее, даже
если это невозможно, ничего смертельного не случится. Браузер просто выдаст
сообщение об ошибке. </P>


<P align="center">[ <A class="menu" HREF="pr0009.html">К следующей главе</A> | <A class="menu" HREF="index.html">К оглавлению</A>
| <A class="menu" HREF="pr0007.html">К предыдущей главе</A> ]</P>

</body>
</html>
